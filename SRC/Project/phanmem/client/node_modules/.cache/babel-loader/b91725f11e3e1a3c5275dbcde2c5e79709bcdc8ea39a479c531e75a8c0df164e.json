{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{ArrowLeft,BookOpen,Clock,Users,Calendar,MapPin,GraduationCap,User,FileText,Download,Clock3,AlertCircle,CheckCircle,XCircle}from'lucide-react';import api from'../services/api';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CourseDetail=()=>{var _course$schedule$,_course$schedule$2;const{id}=useParams();const{user}=useAuth();const[course,setCourse]=useState(null);const[loading,setLoading]=useState(true);const[isRegistered,setIsRegistered]=useState(false);const[registration,setRegistration]=useState(null);const[showRegistrationModal,setShowRegistrationModal]=useState(false);useEffect(()=>{fetchCourseDetails();checkRegistrationStatus();},[id]);const fetchCourseDetails=async()=>{try{setLoading(true);const response=await api.get(\"/api/courses/\".concat(id));setCourse(response.data);}catch(error){console.error('Error fetching course details:',error);toast.error('Không thể tải thông tin khóa học');}finally{setLoading(false);}};const checkRegistrationStatus=async()=>{if((user===null||user===void 0?void 0:user.role)==='student'){try{const response=await api.get('/api/registrations');const userRegistration=response.data.registrations.find(r=>r.course===id&&r.student===user.id);if(userRegistration){setIsRegistered(true);setRegistration(userRegistration);}}catch(error){console.error('Error checking registration status:',error);}}};const handleRegister=async()=>{try{// Get current semester\nconst semesterResponse=await api.get('/api/semesters/current');const currentSemester=semesterResponse.data;if(!currentSemester){toast.error('Không có học kỳ nào đang mở');return;}const response=await api.post('/api/registrations',{courseId:id,semesterId:currentSemester._id});setIsRegistered(true);setRegistration(response.data);toast.success('Đăng ký khóa học thành công!');setShowRegistrationModal(false);}catch(error){var _error$response,_error$response$data;console.error('Error registering for course:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Đăng ký thất bại');}};const handleDrop=async()=>{if(!registration)return;try{await api.put(\"/api/registrations/\".concat(registration._id,\"/drop\"));setIsRegistered(false);setRegistration(null);toast.success('Đã xóa khóa học thành công!');}catch(error){console.error('Error dropping course:',error);toast.error('Không thể xóa khóa học');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}if(!course){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Kh\\xF3a h\\u1ECDc kh\\xF4ng t\\u1ED3n t\\u1EA1i\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Kh\\xF3a h\\u1ECDc b\\u1EA1n \\u0111ang t\\xECm ki\\u1EBFm kh\\xF4ng t\\u1ED3n t\\u1EA1i ho\\u1EB7c \\u0111\\xE3 b\\u1ECB x\\xF3a.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(Link,{to:\"/courses\",className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-4 w-4 mr-2\"}),\"Quay l\\u1EA1i danh s\\xE1ch\"]})})]});}const getStatusColor=status=>{switch(status){case'approved':return'text-green-600 bg-green-100';case'pending':return'text-yellow-600 bg-yellow-100';case'rejected':return'text-red-600 bg-red-100';case'dropped':return'text-gray-600 bg-gray-100';case'completed':return'text-blue-600 bg-blue-100';default:return'text-gray-600 bg-gray-100';}};const getStatusDisplayName=status=>{switch(status){case'approved':return'Đã duyệt';case'pending':return'Chờ duyệt';case'rejected':return'Từ chối';case'dropped':return'Đã xóa';case'completed':return'Hoàn thành';default:return status;}};const getCategoryDisplayName=category=>{switch(category){case'required':return'Bắt buộc';case'elective':return'Tự chọn';case'general':return'Đại cương';default:return category;}};const getCategoryColor=category=>{switch(category){case'required':return'bg-red-100 text-red-800';case'elective':return'bg-blue-100 text-blue-800';case'general':return'bg-green-100 text-green-800';default:return'bg-gray-100 text-gray-800';}};const formatTime=time=>{if(!time)return'';return time.replace(/(\\d{2}):(\\d{2})/,'$1:$2');};const getDayDisplayName=day=>{const days={'monday':'Thứ 2','tuesday':'Thứ 3','wednesday':'Thứ 4','thursday':'Thứ 5','friday':'Thứ 6','saturday':'Thứ 7','sunday':'Chủ nhật'};return days[day]||day;};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/courses\",className:\"inline-flex items-center text-sm text-blue-600 hover:text-blue-500\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-4 w-4 mr-1\"}),\"Quay l\\u1EA1i danh s\\xE1ch kh\\xF3a h\\u1ECDc\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row lg:items-start lg:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 text-sm font-medium rounded-full \".concat(getCategoryColor(course.category)),children:getCategoryDisplayName(course.category)}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 text-sm font-medium rounded-full \".concat(course.isActive?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:course.isActive?'Đang mở':'Đã đóng'})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-2\",children:course.courseName}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl text-gray-600 mb-4\",children:course.courseCode}),course.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 text-lg leading-relaxed\",children:course.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 lg:mt-0 lg:ml-6 flex flex-col space-y-3\",children:[(user===null||user===void 0?void 0:user.role)==='student'&&/*#__PURE__*/_jsx(_Fragment,{children:!isRegistered?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowRegistrationModal(true),disabled:!course.isActive||!course.isRegistrationOpen,className:\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-5 w-5 mr-2\"}),\"\\u0110\\u0103ng k\\xFD kh\\xF3a h\\u1ECDc\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-3 py-2 text-sm font-medium rounded-md \".concat(getStatusColor(registration.status)),children:getStatusDisplayName(registration.status)}),registration.status==='approved'&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleDrop,className:\"inline-flex items-center justify-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\",children:[/*#__PURE__*/_jsx(XCircle,{className:\"h-4 w-4 mr-2\"}),\"X\\xF3a kh\\xF3a h\\u1ECDc\"]})]})}),((user===null||user===void 0?void 0:user.role)==='admin'||(user===null||user===void 0?void 0:user.role)==='teacher')&&/*#__PURE__*/_jsxs(Link,{to:\"/admin/courses/edit/\".concat(course._id),className:\"inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\",children:[/*#__PURE__*/_jsx(FileText,{className:\"h-4 w-4 mr-2\"}),\"Ch\\u1EC9nh s\\u1EEDa\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Th\\xF4ng tin c\\u01A1 b\\u1EA3n\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-5 w-5 text-blue-500 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"T\\xEDn ch\\u1EC9:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto font-medium\",children:course.credits})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(GraduationCap,{className:\"h-5 w-5 text-green-500 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Ng\\xE0nh:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto font-medium\",children:course.major})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"h-5 w-5 text-purple-500 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"N\\u0103m:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto font-medium\",children:course.year})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-5 w-5 text-orange-500 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"H\\u1ECDc k\\u1EF3:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto font-medium\",children:course.semester})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-5 w-5 text-indigo-500 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Sinh vi\\xEAn:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-auto font-medium\",children:[course.currentStudents,\"/\",course.maxStudents]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"L\\u1ECBch h\\u1ECDc\"}),course.schedule&&course.schedule.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[course.schedule.map((session,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"h-4 w-4 text-blue-500 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:getDayDisplayName(session.day)}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-auto text-gray-900\",children:[formatTime(session.startTime),\" - \",formatTime(session.endTime)]})]},index)),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-4 w-4 text-green-500 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Ph\\xF2ng:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-auto text-gray-900\",children:[(_course$schedule$=course.schedule[0])===null||_course$schedule$===void 0?void 0:_course$schedule$.building,\" - \",(_course$schedule$2=course.schedule[0])===null||_course$schedule$2===void 0?void 0:_course$schedule$2.room]})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"Ch\\u01B0a c\\xF3 l\\u1ECBch h\\u1ECDc\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Gi\\u1EA3ng vi\\xEAn\"}),course.teacher?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(User,{className:\"h-6 w-6 text-blue-600\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[course.teacher.firstName,\" \",course.teacher.lastName]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:course.teacher.email})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"Ch\\u01B0a ph\\xE2n c\\xF4ng gi\\u1EA3ng vi\\xEAn\"})]})]}),course.examSchedule&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"L\\u1ECBch thi\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Calendar,{className:\"h-5 w-5 text-red-500 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Ng\\xE0y thi:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto font-medium\",children:new Date(course.examSchedule.date).toLocaleDateString('vi-VN')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-5 w-5 text-red-500 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Gi\\u1EDD thi:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto font-medium\",children:course.examSchedule.time})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-5 w-5 text-red-500 mr-3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u0110\\u1ECBa \\u0111i\\u1EC3m:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-auto font-medium\",children:[course.examSchedule.building,\" - \",course.examSchedule.room]})]})]})]}),course.gradingPolicy&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Ch\\xEDnh s\\xE1ch ch\\u1EA5m \\u0111i\\u1EC3m\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:[course.gradingPolicy.attendance,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Chuy\\xEAn c\\u1EA7n\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-green-600\",children:[course.gradingPolicy.midterm,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Gi\\u1EEF k\\u1EF3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-2xl font-bold text-purple-600\",children:[course.gradingPolicy.final,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Cu\\u1ED1i k\\u1EF3\"})]})]})]}),course.materials&&course.materials.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"T\\xE0i li\\u1EC7u kh\\xF3a h\\u1ECDc\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:course.materials.map((material,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(FileText,{className:\"h-5 w-5 text-blue-500 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:material.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:material.description})]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200\",children:[/*#__PURE__*/_jsx(Download,{className:\"h-4 w-4 mr-1\"}),\"T\\u1EA3i xu\\u1ED1ng\"]})]},index))})]}),course.prerequisites&&course.prerequisites.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"\\u0110i\\u1EC1u ki\\u1EC7n ti\\xEAn quy\\u1EBFt\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:course.prerequisites.map((prereq,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 text-green-500 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-900\",children:[prereq.courseCode,\" - \",prereq.courseName]}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-gray-500\",children:[\"(\",prereq.credits,\" t\\xEDn ch\\u1EC9)\"]})]},index))})]}),showRegistrationModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"X\\xE1c nh\\u1EADn \\u0111\\u0103ng k\\xFD kh\\xF3a h\\u1ECDc\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mb-6\",children:[\"B\\u1EA1n c\\xF3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n \\u0111\\u0103ng k\\xFD kh\\xF3a h\\u1ECDc \",/*#__PURE__*/_jsx(\"strong\",{children:course.courseName}),\"?\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowRegistrationModal(false),className:\"flex-1 px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\",children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRegister,className:\"flex-1 px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",children:\"X\\xE1c nh\\u1EADn\"})]})]})})})]});};export default CourseDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useAuth","ArrowLeft","BookOpen","Clock","Users","Calendar","MapPin","GraduationCap","User","FileText","Download","Clock3","AlertCircle","CheckCircle","XCircle","api","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CourseDetail","_course$schedule$","_course$schedule$2","id","user","course","setCourse","loading","setLoading","isRegistered","setIsRegistered","registration","setRegistration","showRegistrationModal","setShowRegistrationModal","fetchCourseDetails","checkRegistrationStatus","response","get","concat","data","error","console","role","userRegistration","registrations","find","r","student","handleRegister","semesterResponse","currentSemester","post","courseId","semesterId","_id","success","_error$response","_error$response$data","message","handleDrop","put","className","children","to","getStatusColor","status","getStatusDisplayName","getCategoryDisplayName","category","getCategoryColor","formatTime","time","replace","getDayDisplayName","day","days","isActive","courseName","courseCode","description","onClick","disabled","isRegistrationOpen","credits","major","year","semester","currentStudents","maxStudents","schedule","length","map","session","index","startTime","endTime","building","room","teacher","firstName","lastName","email","examSchedule","Date","date","toLocaleDateString","gradingPolicy","attendance","midterm","final","materials","material","title","prerequisites","prereq"],"sources":["D:/CNTT/phanmem/client/src/pages/CourseDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { \r\n  ArrowLeft,\r\n  BookOpen, \r\n  Clock, \r\n  Users, \r\n  Calendar,\r\n  MapPin,\r\n  GraduationCap,\r\n  User,\r\n  FileText,\r\n  Download,\r\n  Clock3,\r\n  AlertCircle,\r\n  CheckCircle,\r\n  XCircle\r\n} from 'lucide-react';\r\nimport api from '../services/api';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst CourseDetail = () => {\r\n  const { id } = useParams();\r\n  const { user } = useAuth();\r\n  const [course, setCourse] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isRegistered, setIsRegistered] = useState(false);\r\n  const [registration, setRegistration] = useState(null);\r\n  const [showRegistrationModal, setShowRegistrationModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchCourseDetails();\r\n    checkRegistrationStatus();\r\n  }, [id]);\r\n\r\n  const fetchCourseDetails = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get(`/api/courses/${id}`);\r\n      setCourse(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching course details:', error);\r\n      toast.error('Không thể tải thông tin khóa học');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkRegistrationStatus = async () => {\r\n    if (user?.role === 'student') {\r\n      try {\r\n        const response = await api.get('/api/registrations');\r\n        const userRegistration = response.data.registrations.find(\r\n          r => r.course === id && r.student === user.id\r\n        );\r\n        if (userRegistration) {\r\n          setIsRegistered(true);\r\n          setRegistration(userRegistration);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error checking registration status:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleRegister = async () => {\r\n    try {\r\n      // Get current semester\r\n      const semesterResponse = await api.get('/api/semesters/current');\r\n      const currentSemester = semesterResponse.data;\r\n\r\n      if (!currentSemester) {\r\n        toast.error('Không có học kỳ nào đang mở');\r\n        return;\r\n      }\r\n\r\n      const response = await api.post('/api/registrations', {\r\n        courseId: id,\r\n        semesterId: currentSemester._id\r\n      });\r\n\r\n      setIsRegistered(true);\r\n      setRegistration(response.data);\r\n      toast.success('Đăng ký khóa học thành công!');\r\n      setShowRegistrationModal(false);\r\n    } catch (error) {\r\n      console.error('Error registering for course:', error);\r\n      toast.error(error.response?.data?.message || 'Đăng ký thất bại');\r\n    }\r\n  };\r\n\r\n  const handleDrop = async () => {\r\n    if (!registration) return;\r\n\r\n    try {\r\n      await api.put(`/api/registrations/${registration._id}/drop`);\r\n      setIsRegistered(false);\r\n      setRegistration(null);\r\n      toast.success('Đã xóa khóa học thành công!');\r\n    } catch (error) {\r\n      console.error('Error dropping course:', error);\r\n      toast.error('Không thể xóa khóa học');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!course) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <AlertCircle className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n        <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Khóa học không tồn tại</h3>\r\n        <p className=\"mt-1 text-sm text-gray-500\">\r\n          Khóa học bạn đang tìm kiếm không tồn tại hoặc đã bị xóa.\r\n        </p>\r\n        <div className=\"mt-6\">\r\n          <Link\r\n            to=\"/courses\"\r\n            className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\r\n          >\r\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\r\n            Quay lại danh sách\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'approved': return 'text-green-600 bg-green-100';\r\n      case 'pending': return 'text-yellow-600 bg-yellow-100';\r\n      case 'rejected': return 'text-red-600 bg-red-100';\r\n      case 'dropped': return 'text-gray-600 bg-gray-100';\r\n      case 'completed': return 'text-blue-600 bg-blue-100';\r\n      default: return 'text-gray-600 bg-gray-100';\r\n    }\r\n  };\r\n\r\n  const getStatusDisplayName = (status) => {\r\n    switch (status) {\r\n      case 'approved': return 'Đã duyệt';\r\n      case 'pending': return 'Chờ duyệt';\r\n      case 'rejected': return 'Từ chối';\r\n      case 'dropped': return 'Đã xóa';\r\n      case 'completed': return 'Hoàn thành';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n  const getCategoryDisplayName = (category) => {\r\n    switch (category) {\r\n      case 'required': return 'Bắt buộc';\r\n      case 'elective': return 'Tự chọn';\r\n      case 'general': return 'Đại cương';\r\n      default: return category;\r\n    }\r\n  };\r\n\r\n  const getCategoryColor = (category) => {\r\n    switch (category) {\r\n      case 'required': return 'bg-red-100 text-red-800';\r\n      case 'elective': return 'bg-blue-100 text-blue-800';\r\n      case 'general': return 'bg-green-100 text-green-800';\r\n      default: return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const formatTime = (time) => {\r\n    if (!time) return '';\r\n    return time.replace(/(\\d{2}):(\\d{2})/, '$1:$2');\r\n  };\r\n\r\n  const getDayDisplayName = (day) => {\r\n    const days = {\r\n      'monday': 'Thứ 2',\r\n      'tuesday': 'Thứ 3',\r\n      'wednesday': 'Thứ 4',\r\n      'thursday': 'Thứ 5',\r\n      'friday': 'Thứ 6',\r\n      'saturday': 'Thứ 7',\r\n      'sunday': 'Chủ nhật'\r\n    };\r\n    return days[day] || day;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Back Button */}\r\n      <div>\r\n        <Link\r\n          to=\"/courses\"\r\n          className=\"inline-flex items-center text-sm text-blue-600 hover:text-blue-500\"\r\n        >\r\n          <ArrowLeft className=\"h-4 w-4 mr-1\" />\r\n          Quay lại danh sách khóa học\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Course Header */}\r\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n        <div className=\"flex flex-col lg:flex-row lg:items-start lg:justify-between\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"flex items-center space-x-3 mb-4\">\r\n              <span className={`px-3 py-1 text-sm font-medium rounded-full ${getCategoryColor(course.category)}`}>\r\n                {getCategoryDisplayName(course.category)}\r\n              </span>\r\n              <span className={`px-3 py-1 text-sm font-medium rounded-full ${\r\n                course.isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n              }`}>\r\n                {course.isActive ? 'Đang mở' : 'Đã đóng'}\r\n              </span>\r\n            </div>\r\n            \r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n              {course.courseName}\r\n            </h1>\r\n            <p className=\"text-xl text-gray-600 mb-4\">{course.courseCode}</p>\r\n            \r\n            {course.description && (\r\n              <p className=\"text-gray-700 text-lg leading-relaxed\">\r\n                {course.description}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"mt-6 lg:mt-0 lg:ml-6 flex flex-col space-y-3\">\r\n            {user?.role === 'student' && (\r\n              <>\r\n                {!isRegistered ? (\r\n                  <button\r\n                    onClick={() => setShowRegistrationModal(true)}\r\n                    disabled={!course.isActive || !course.isRegistrationOpen}\r\n                    className=\"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    <BookOpen className=\"h-5 w-5 mr-2\" />\r\n                    Đăng ký khóa học\r\n                  </button>\r\n                ) : (\r\n                  <div className=\"space-y-3\">\r\n                    <span className={`inline-flex items-center px-3 py-2 text-sm font-medium rounded-md ${getStatusColor(registration.status)}`}>\r\n                      {getStatusDisplayName(registration.status)}\r\n                    </span>\r\n                    {registration.status === 'approved' && (\r\n                      <button\r\n                        onClick={handleDrop}\r\n                        className=\"inline-flex items-center justify-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\r\n                      >\r\n                        <XCircle className=\"h-4 w-4 mr-2\" />\r\n                        Xóa khóa học\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {(user?.role === 'admin' || user?.role === 'teacher') && (\r\n              <Link\r\n                to={`/admin/courses/edit/${course._id}`}\r\n                className=\"inline-flex items-center justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\"\r\n              >\r\n                <FileText className=\"h-4 w-4 mr-2\" />\r\n                Chỉnh sửa\r\n              </Link>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Course Information Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {/* Basic Info */}\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Thông tin cơ bản</h3>\r\n          <div className=\"space-y-3\">\r\n            <div className=\"flex items-center text-sm\">\r\n              <BookOpen className=\"h-5 w-5 text-blue-500 mr-3\" />\r\n              <span className=\"text-gray-600\">Tín chỉ:</span>\r\n              <span className=\"ml-auto font-medium\">{course.credits}</span>\r\n            </div>\r\n            <div className=\"flex items-center text-sm\">\r\n              <GraduationCap className=\"h-5 w-5 text-green-500 mr-3\" />\r\n              <span className=\"text-gray-600\">Ngành:</span>\r\n              <span className=\"ml-auto font-medium\">{course.major}</span>\r\n            </div>\r\n            <div className=\"flex items-center text-sm\">\r\n              <Calendar className=\"h-5 w-5 text-purple-500 mr-3\" />\r\n              <span className=\"text-gray-600\">Năm:</span>\r\n              <span className=\"ml-auto font-medium\">{course.year}</span>\r\n            </div>\r\n            <div className=\"flex items-center text-sm\">\r\n              <Clock className=\"h-5 w-5 text-orange-500 mr-3\" />\r\n              <span className=\"text-gray-600\">Học kỳ:</span>\r\n              <span className=\"ml-auto font-medium\">{course.semester}</span>\r\n            </div>\r\n            <div className=\"flex items-center text-sm\">\r\n              <Users className=\"h-5 w-5 text-indigo-500 mr-3\" />\r\n              <span className=\"text-gray-600\">Sinh viên:</span>\r\n              <span className=\"ml-auto font-medium\">{course.currentStudents}/{course.maxStudents}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Schedule */}\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Lịch học</h3>\r\n          {course.schedule && course.schedule.length > 0 ? (\r\n            <div className=\"space-y-3\">\r\n              {course.schedule.map((session, index) => (\r\n                <div key={index} className=\"flex items-center text-sm\">\r\n                  <Calendar className=\"h-4 w-4 text-blue-500 mr-2\" />\r\n                  <span className=\"text-gray-600\">\r\n                    {getDayDisplayName(session.day)}\r\n                  </span>\r\n                  <span className=\"ml-auto text-gray-900\">\r\n                    {formatTime(session.startTime)} - {formatTime(session.endTime)}\r\n                  </span>\r\n                </div>\r\n              ))}\r\n              <div className=\"flex items-center text-sm\">\r\n                <MapPin className=\"h-4 w-4 text-green-500 mr-2\" />\r\n                <span className=\"text-gray-600\">Phòng:</span>\r\n                <span className=\"ml-auto text-gray-900\">\r\n                  {course.schedule[0]?.building} - {course.schedule[0]?.room}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-500 text-sm\">Chưa có lịch học</p>\r\n          )}\r\n        </div>\r\n\r\n        {/* Teacher Info */}\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Giảng viên</h3>\r\n          {course.teacher ? (\r\n            <div className=\"flex items-center\">\r\n              <div className=\"flex-shrink-0\">\r\n                <div className=\"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                  <User className=\"h-6 w-6 text-blue-600\" />\r\n                </div>\r\n              </div>\r\n              <div className=\"ml-3\">\r\n                <p className=\"text-sm font-medium text-gray-900\">\r\n                  {course.teacher.firstName} {course.teacher.lastName}\r\n                </p>\r\n                <p className=\"text-sm text-gray-500\">{course.teacher.email}</p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-gray-500 text-sm\">Chưa phân công giảng viên</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Exam Schedule */}\r\n      {course.examSchedule && (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Lịch thi</h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div className=\"flex items-center text-sm\">\r\n              <Calendar className=\"h-5 w-5 text-red-500 mr-3\" />\r\n              <span className=\"text-gray-600\">Ngày thi:</span>\r\n              <span className=\"ml-auto font-medium\">\r\n                {new Date(course.examSchedule.date).toLocaleDateString('vi-VN')}\r\n              </span>\r\n            </div>\r\n            <div className=\"flex items-center text-sm\">\r\n              <Clock className=\"h-5 w-5 text-red-500 mr-3\" />\r\n              <span className=\"text-gray-600\">Giờ thi:</span>\r\n              <span className=\"ml-auto font-medium\">{course.examSchedule.time}</span>\r\n            </div>\r\n            <div className=\"flex items-center text-sm\">\r\n              <MapPin className=\"h-5 w-5 text-red-500 mr-3\" />\r\n              <span className=\"text-gray-600\">Địa điểm:</span>\r\n              <span className=\"ml-auto font-medium\">\r\n                {course.examSchedule.building} - {course.examSchedule.room}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Grading Policy */}\r\n      {course.gradingPolicy && (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Chính sách chấm điểm</h3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\r\n              <div className=\"text-2xl font-bold text-blue-600\">{course.gradingPolicy.attendance}%</div>\r\n              <div className=\"text-sm text-gray-600\">Chuyên cần</div>\r\n            </div>\r\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\r\n              <div className=\"text-2xl font-bold text-green-600\">{course.gradingPolicy.midterm}%</div>\r\n              <div className=\"text-sm text-gray-600\">Giữ kỳ</div>\r\n            </div>\r\n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\r\n              <div className=\"text-2xl font-bold text-purple-600\">{course.gradingPolicy.final}%</div>\r\n              <div className=\"text-sm text-gray-600\">Cuối kỳ</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Course Materials */}\r\n      {course.materials && course.materials.length > 0 && (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Tài liệu khóa học</h3>\r\n          <div className=\"space-y-3\">\r\n            {course.materials.map((material, index) => (\r\n              <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                <div className=\"flex items-center\">\r\n                  <FileText className=\"h-5 w-5 text-blue-500 mr-3\" />\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-gray-900\">{material.title}</p>\r\n                    <p className=\"text-xs text-gray-500\">{material.description}</p>\r\n                  </div>\r\n                </div>\r\n                <button className=\"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-100 hover:bg-blue-200\">\r\n                  <Download className=\"h-4 w-4 mr-1\" />\r\n                  Tải xuống\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Prerequisites */}\r\n      {course.prerequisites && course.prerequisites.length > 0 && (\r\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Điều kiện tiên quyết</h3>\r\n          <div className=\"space-y-2\">\r\n            {course.prerequisites.map((prereq, index) => (\r\n              <div key={index} className=\"flex items-center text-sm\">\r\n                <CheckCircle className=\"h-4 w-4 text-green-500 mr-2\" />\r\n                <span className=\"text-gray-900\">{prereq.courseCode} - {prereq.courseName}</span>\r\n                <span className=\"ml-2 text-gray-500\">({prereq.credits} tín chỉ)</span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Registration Modal */}\r\n      {showRegistrationModal && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n            <div className=\"mt-3 text-center\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n                Xác nhận đăng ký khóa học\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 mb-6\">\r\n                Bạn có chắc chắn muốn đăng ký khóa học <strong>{course.courseName}</strong>?\r\n              </p>\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  onClick={() => setShowRegistrationModal(false)}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\r\n                >\r\n                  Hủy\r\n                </button>\r\n                <button\r\n                  onClick={handleRegister}\r\n                  className=\"flex-1 px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\r\n                >\r\n                  Xác nhận\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CourseDetail; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}